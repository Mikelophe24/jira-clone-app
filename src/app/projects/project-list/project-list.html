<div class="project-list-container">
  <div class="page-header">
    <div class="header-left">
      <h1 class="page-title">Projects</h1>
      <p class="page-subtitle">Manage your projects and collaborate with your team</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="goToProfile()">
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
          <circle cx="12" cy="7" r="4" />
        </svg>
        Profile
      </button>
      <button class="btn btn-primary" (click)="createProject()">
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="12" y1="5" x2="12" y2="19" />
          <line x1="5" y1="12" x2="19" y2="12" />
        </svg>
        Create Project
      </button>
    </div>
  </div>

  <div class="loading-state" *ngIf="isLoading$ | async">
    <div class="spinner"></div>
    <p>Loading projects...</p>
  </div>

  <div class="projects-content" *ngIf="!(isLoading$ | async)">
    <!-- My Projects Section -->
    <section class="projects-section">
      <h2 class="section-title">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
          <polyline points="9 22 9 12 15 12 15 22" />
        </svg>
        My Projects
      </h2>

      <div class="projects-grid" *ngIf="(myProjects$ | async)?.length; else noMyProjects">
        <div
          class="project-card"
          *ngFor="let project of myProjects$ | async"
          (click)="openProject(project.id)"
        >
          <div class="project-header">
            <div class="project-icon">
              {{ project.name.charAt(0).toUpperCase() }}
            </div>
            <button
              class="settings-button"
              (click)="openProjectSettings(project.id, $event)"
              title="Project Settings"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="3" />
                <path
                  d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"
                />
              </svg>
            </button>
          </div>

          <h3 class="project-name">{{ project.name }}</h3>
          <p class="project-description">{{ project.description || 'No description' }}</p>

          <div class="project-footer">
            <div class="project-stat">
              <svg
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
              </svg>
              <span
                >{{ project.memberCount }} member{{ project.memberCount !== 1 ? 's' : '' }}</span
              >
            </div>
            <span class="owner-badge">Owner</span>
          </div>
        </div>
      </div>

      <ng-template #noMyProjects>
        <div class="empty-state">
          <svg
            width="64"
            height="64"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          >
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <line x1="12" y1="8" x2="12" y2="16" />
            <line x1="8" y1="12" x2="16" y2="12" />
          </svg>
          <h3>No projects yet</h3>
          <p>Create your first project to get started</p>
          <button class="btn btn-primary" (click)="createProject()">Create Project</button>
        </div>
      </ng-template>
    </section>

    <!-- Shared Projects Section -->
    <section class="projects-section" *ngIf="(sharedProjects$ | async)?.length">
      <h2 class="section-title">
        <svg
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
          <circle cx="9" cy="7" r="4" />
          <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
          <path d="M16 3.13a4 4 0 0 1 0 7.75" />
        </svg>
        Shared with me
      </h2>

      <div class="projects-grid">
        <div
          class="project-card"
          *ngFor="let project of sharedProjects$ | async"
          (click)="openProject(project.id)"
        >
          <div class="project-header">
            <div class="project-icon shared">
              {{ project.name.charAt(0).toUpperCase() }}
            </div>
          </div>

          <h3 class="project-name">{{ project.name }}</h3>
          <p class="project-description">{{ project.description || 'No description' }}</p>

          <div class="project-footer">
            <div class="project-stat">
              <svg
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                <circle cx="9" cy="7" r="4" />
                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
              </svg>
              <span
                >{{ project.memberCount }} member{{ project.memberCount !== 1 ? 's' : '' }}</span
              >
            </div>
            <span class="member-badge">Member</span>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
