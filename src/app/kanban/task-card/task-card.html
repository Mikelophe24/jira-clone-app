<div class="card-container" (click)="edit.emit()">
  <div class="card-content">
    <h3 class="card-title">{{ task.title }}</h3>
    <p class="card-description" *ngIf="task.description">{{ task.description }}</p>
  </div>

  <div class="card-footer">
    <div class="footer-left">
      <!-- Priority Icon -->
      <div
        class="priority-badge"
        [ngClass]="task.priority?.toLowerCase() || 'medium'"
        [title]="task.priority || 'Medium'"
      >
        <div class="priority-icon">
          <ng-container [ngSwitch]="task.priority">
            <!-- High -->
            <svg *ngSwitchCase="'High'" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 3l-9 9 1.41 1.41L12 5.83l7.59 7.58L21 12l-9-9z" />
              <path d="M12 8l-9 9 1.41 1.41L12 10.83l7.59 7.58L21 17l-9-9z" />
            </svg>
            <!-- Medium -->
            <svg *ngSwitchCase="'Medium'" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 8l-9 9 1.41 1.41L12 10.83l7.59 7.58L21 17l-9-9z" />
            </svg>
            <!-- Low -->
            <svg *ngSwitchDefault viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 16l9-9-1.41-1.41L12 13.17 4.41 5.59 3 7l9 9z" />
            </svg>
          </ng-container>
        </div>
        <span class="priority-label">{{ task.priority || 'Medium' }}</span>
      </div>
      <span class="issue-key">JIRA-{{ task.taskNumber }}</span>
    </div>

    <div class="footer-right">
      <span
        class="reporter-name"
        *ngIf="task.reporterName"
        [title]="'Reporter: ' + task.reporterName"
      >
        {{ task.reporterName }}
      </span>
      <div
        class="due-date"
        *ngIf="task.dueDate"
        [class.overdue]="isOverdue(task.dueDate)"
        [title]="'Due: ' + (task.dueDate | date)"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <span>{{ task.dueDate | date : 'd MMM' }}</span>
      </div>

      <div
        class="assignee-avatar"
        [title]="task.assigneeName || 'Unassigned'"
        [style.background-color]="getAvatarColor(task.assigneeName)"
      >
        {{ task.assigneeName ? task.assigneeName.charAt(0).toUpperCase() : '?' }}
      </div>
    </div>
  </div>

  <button class="delete-btn" title="Delete Task" (click)="$event.stopPropagation(); delete.emit()">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path
        d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
      ></path>
    </svg>
  </button>
</div>
